## 식별자, 관계, 속성의 정의

### 개요
- 식별자, 관계, 속성의 정의 단계는
  - 엔티티 기술서 및 수집문서들을 보고 엔티티의
    - 주식별자
    - 관계, 외래식별자
    - 관계에 따른 업무규칙
    - 세부 속성
  을 정의하는 단계

### 정의

#### 주식별자
- 엔티티에 소속된 인스턴스들을 구분하는 기준이 되는 속성
- 중복된 값이 없어야함
- 기본키를 말한다.


- 길이가 짮고, 단순하며, 나중에 잘를 검색할 때 기준에 되는 것이 좋음
- 마땅한 주식별자가 없는 경우
  - 복합 속성을 통해 주식별자를 선별하거나
  - 인위적 주식별자를 만든다

- **인위적 주식별자의 문제점**
  - 주식별자를 단순화 시킬 수 있다는 장점이 있으나
  - DBMS는 서로 다른 튜플로 인식하나 의미적으로는 중복되어 같은 내용을 담고 있을 수도 있다.

- **불필요한 속성이 주식별자에 포함되는 경우 문제점**
  - 의미적 중복이 발생할 가능성이 있으므로 최소한의 속성으로 주식별자를 구성한다.


#### 관계
- 엔티티를 찾는데 사용한 문서들을 이용한다.

##### 도움이되는 지침
1. 문사로부터 동사를 구분한다.
2. 관계 매트릭스를 그려본다.
3. 부모, 자식관계에 있는 엔티티들을 찾아본다.
4. 관계에 대해 카디낼러티와 참여도를 표시한다.

#### 외래식별자
- 두 엔티티가 관계가 있다면 자식 엔티티의 외래식별자 속성이 부모 엔티티의 주식별자를 참조
- 관계를 올바르게 정의했다면 외래식별자는 거의 기계적으로 정의 가능

##### 관계/외래식별자에 대한 규칙
1. 두 엔티티가 관련이 있다는 의미는 두 엔티티가 공유하는 속성이 있다는 뜻이다.
2. 공통속성의 값이 먼저 생성되는 쪽이 부모 엔티티, 가져다 쓰는 쪽이 자식 엔티티가 된다.
3. 부모 엔티티에 있는 공통 속성은 주식별자가 되고, 자식 엔티티의 공통 속성은 외래 식별자가 된다.
4. 부모 엔티티와 자식 엔티티의 카디낼러티는 1:N이다


### 업무 규칙
- 엔티티는 물리 설꼐 단계에서 테이블이 되고 테티블에는 튜플들이 저장된다.
- 관계가 있는 두 엔티티에서 어느 한 쪽의 데이터의 변화가 생기면 두 엔티티 사이에 데이터의 불일치가 발생 할 수 있다.
- 데이터의 불일치가 일어나지 않도록 조치를 취해야하는데 어떻게 조치를 취할 것인지를 정의한 것이 **업무규칙** 이다.
- **참조 무결성 제약 조건을 유지하기 위한 규칙** 으로, 물리적 데이터베이스에 함께 저장되며 DBMS에 의해 규칙이 수행된다.
- <u>부모 테이블의 튜플 삭제/수정</u>, 자식 테이블에 새로운 튜플 추가나 수정 처리 규칙 분류

#### 규칙(부모)
##### 삭제 규칙( delete )
- restrict : 부모 테이블에 있는 값을 자식 테이블에서 참조하고 있다면 부모 테이블의 그 튜플은 삭제 불가능
- cascade : 부모 테이블에 있는 값을 삭제하면 그것을 참조하고 있는 자식 테이블의 값도 함께 삭제
- set null : 부모 테이블에 있는 값을 삭제하면 그것을 참조하고 있는 자식 테이블의 값은 null로 바꾼다.
- set default : 부모 테이블에 있는 값을 삭제하면 그것을 참조하고 있는 자식 테이블의 값은 미리 지정해 놓은 값으로 바뀐다.
- none : 부모 테이블에 있는 값을 삭제해도 그것을 참조하고 있는 자식 테이블의 값을 그대로 유지한다.

##### 수정 규칙( update )
- restrict : 부모 테이블에 있는 값을 자식 테이블에서 참조하고 있다면 부모 테이블에 있는 그 값은 수정할 수 없다.
- cascade : 부모 테이블에 있는 값을 수정하면 그것을 참조하고 있는 자식 테이블의 값도 함께 수정한다.
- set null : 부모 테이블에 있는 값을 수정하면 그것을 참조하고 있는 자식 테이블의 값은 null로 바꾼다.
- set default : 부모 테이블에 있는 값을 수정하면 그것을 참조하고 있는 자식 테이블의 값은 미리 지정해 놓은 다른 값으로 바뀐다.
- none : 부모 테이블에 있는 값을 수정해도 그것을 참조하고 있는 자식 테이블의 값을 그대로 유지한다.

#### 규칙(자식)
##### 삽입 규칙( insert )
- restrict : 자식 테이블에서 튜플을 삽입할 때 부모 테이블에 없는 값을 사용하면 튜플 삽입이 안되게 한다.
- none : 자식 테이블에서 튜플을 삽입할 때 어떤 값을 사용해도 튜플이 삽입된다.

##### 수정 규칙
- restrict : 자식 테이블에서 튜플을 수정할 때 부모 테이블에 없는 값을 사용하면 튜플의 수정이 안되게 한다.
- none : 자식 테이블에서 튜플을 변경할 때 어떤 값을사용해도 튜플이 변경된다.

### 속성
- 엔티티 내에서 관리해야 할 정보의 항목들
- **기본속성** : 업무의 분석 과정에서 도출되는 속성들로서 현실세계에 존재하는 정보를 반영
- **설계 속성** : 실제 업무의 분석 내용에는 존재하지 않았지만 정보를 효과적으로 관리하기 위해 설계의 차원에서 새로 만든 속성
- **유도 속성** : 다른 속성들로부터 유도될 수 있는 속성
